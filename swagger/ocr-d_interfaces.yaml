swagger: "2.0"
info:
  description: "This is a definition of the modules used for the OCR-D project."
  version: "0.9"
  title: "OCR-D"
  termsOfService: "http://swagger.io/terms/"
  contact:
    email: "volker.hartmann@kit.edu"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
host: "test.ocr-d.de"
basePath: "/v1"
tags:
- name: "Bildvorverarbeitung"
  description: "Verfahren, die die Digitalisate für die Layout- und Texterkennung charakterisieren und optimieren."
- name: "Layouterkennung"
  description: "Die Erfassung des korrekten, d.h. die Wiedergabe des logisch strukturell auf sich beziehenden Textflusses und hohe Textgenauigkeit."
- name: "Textoptimierung"
  description: "Kombination mehrere OCR-Engines mit anschließender Nachkorrektur zur Verbesserung der Textergebnisse."
- name: "Modellbildung"
  description: "Training der Modelle und Bereitstellung dieser."
- name: "Langzeitarchivierung"
  description: "Sicherung der Langzeitverfügbarkeit und Referenzierbarkeit der gewonnenen Texte."
- name: "Qualitätssicherung"
  description: "Bestimmung/Schätzung des Potenzials der einzelnen Komponenten."
schemes:
- "http"
paths:
  /preprocessing/characterization:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Determine specific characteristics of a digitalization."
      description: "Determine intrinsic and extrensic characteristics of a digitalization. These characteristics should be stored as metadata."
      operationId: "createFeatures"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG") inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp section (ID="OCR-D-SEG-PAGE").
          schema:
            $ref: '#/definitions/metsXML'
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/characterization/font:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Estimate font families and languages used."
      description: "Estimate used font families and the languages used."
      operationId: "estimateFont"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG") inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
               type: string 
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. Return the estimation of fonts and languages used inside the document.
          schema:
            $ref: '#/definitions/FontEstimation'
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Execute all steps for image optimization at once."
      description: "The following steps where executed (if neccessary): Cropping, deskewing, despeckling, dewarping, binarization."
      operationId: "createOptimizedImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG") inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (IDs "OCR-D-SEG-PAGE", ”OCR-D-IMG-CROP”, ”OCR-D-IMG-DESKEW”, ”OCR-D-IMG-DESPECK”, ”OCR-D-IMG-DEWARP”, ”OCR-D-IMG-BIN”).
          schema:
            $ref: '#/definitions/metsXML'
          headers:
            id:
              type: string
              description: id of the generated objects.
            CroppedImage:
              type: string
              format: uri
              description: URL of the cropped image. 
            DeskewedImage:
              type: string
              format: uri
              description: URL of the deskewed image.
            DespeckledImage:
              type: string
              format: uri
              description: URL of the despeckled image.
            DewarpedImage:
              type: string
              format: uri
              description: URL of the dewarped image.
            BinarizedImage:
              type: string
              format: uri
              description: URL of the binarized image.
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization/cropping:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Crops the digitization to printspace."
      description: "Image may not really cropped. Define printSpace inside PAGE XML instead."
      operationId: "createCroppedImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG") inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-IMG-CROP”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            CroppedImage:
              type: string
              format: uri
              description: URL of the cropped image.
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization/cropping/{id}/image:
    get:
      tags:
      - "Bildvorverarbeitung"
      summary: "Get cropped image."
      description: "Get cropped image created with POST in beforehand."
      operationId: "getCroppedImage"
      produces:
      - "image/jpg"
      parameters:
         - in: path
           name: id
           type: string 
           required: true
           description: ID of the created image.
      responses:
        200:
          description: "Successful Operation."
          schema:
            type: file
        404:
          description: "Not found."
        500:
          description: "Internal error"
  /preprocessing/optimization/deskewing:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Deskews the digitization."
      description: "Deskews the digitization. Adds an alternative image to PAGE XML."
      operationId: "createDeskewedImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-IMG-DESKEW”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            DeskewedImage:
              type: string
              format: uri
              description: URL of the deskewed image.
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization/deskewing/{id}/image:
    get:
      tags:
      - "Bildvorverarbeitung"
      summary: "Get deskewed image."
      description: "Get deskewed image created with POST in beforehand."
      operationId: "getDeskewedImage"
      produces:
      - "image/jpg"
      parameters:
         - in: path
           name: id
           type: string 
           required: true
           description: ID of the created image.
      responses:
        200:
          description: "Successful Operation."
          schema:
            type: file
        404:
          description: "Not found."
        500:
          description: "Internal error"
  /preprocessing/optimization/despeckling:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Removes speckles in the digitization."
      description: "Remove speckles from Image. If there are some edits inside image an alternative image will be added to PAGE XML."
      operationId: "createDespeckledImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-IMG-DESPECK”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            DespeckledImage:
              type: string
              format: uri
              description: URL of the despeckled image.
          schema:
            $ref: "#/definitions/mmetsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization/despeckling/{id}/image:
    get:
      tags:
      - "Bildvorverarbeitung"
      summary: "Get despeckled image."
      description: "Get despeckled image created with POST in beforehand."
      operationId: "getDespeckledImage"
      produces:
      - "image/jpg"
      parameters:
         - in: path
           name: id
           type: string 
           required: true
           description: ID of the created image.
      responses:
        200:
          description: "Successful Operation."
          schema:
            type: file
        404:
          description: "Not found."
        500:
          description: "Internal error"
  /preprocessing/optimization/dewarping:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Dewarps the digitization."
      description: "Remove ripples from image. If there are some edits inside image an alternative image will be added to PAGE XML."
      operationId: "createDewarpedImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-IMG-DEWARP”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            DewarpedImage:
              type: string
              format: uri
              description: URL of the dewarped image.
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /preprocessing/optimization/dewarping/{id}/image:
    get:
      tags:
      - "Bildvorverarbeitung"
      summary: "Get dewarped image."
      description: "Get dewarped image created with POST in beforehand."
      operationId: "getDewarpedImage"
      produces:
      - "image/jpg"
      parameters:
         - in: path
           name: id
           type: string 
           required: true
           description: ID of the created image.
      responses:
        200:
          description: "Successful Operation."
          schema:
            type: file
        404:
          description: "Not found."
        500:
          description: "Internal error"
  /preprocessing/optimization/binarization:
    post:
      tags:
      - "Bildvorverarbeitung"
      summary: "Binarize image."
      description: "Create binary image. An alternative image will be added to PAGE XML."
      operationId: "createBinarizedImage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK” or ”OCR-D-IMG-DEWARP”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-IMG-BIN”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            BinarizedImage:
              type: string
              format: uri
              description: URL of the binarized image.
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
         description: "Internal error"
  /preprocessing/optimization/binarization/{id}/image:
    get:
      tags:
      - "Bildvorverarbeitung"
      summary: "Get binarized image."
      description: "Get binarized image created with POST in beforehand."
      operationId: "getBinarizedImage"
      produces:
      - "image/jpg"
      parameters:
         - in: path
           name: id
           type: string 
           required: true
           description: ID of the created image.
      responses:
        200:
          description: "Successful Operation."
          schema:
            type: file
        404:
          description: "Not found."
        500:
          description: "Internal error"
  /layout/segmentation:
    post:
      tags:
      - "Layouterkennung"
      summary: "Detect and classify all regions of a page."
      description: "Detect and classify all regions of a single page. Do everything in one step (page/line segmentation and classification)."
      operationId: "createAndClassifyRegionsOfPage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK” or ”OCR-D-IMG-DEWARP” or ”OCR-D-IMG-BIN”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID "OCR-D-SEG-PAGE" and/or ”OCR-D-SEG-BLOCK” and/or ”OCR-D-SEG-LINE”).
          headers:
            id:
              type: string
              description: id of the generated objects.
            BinarizedImage:
              type: string
              format: uri
              description: URL of the binarized image.
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /layout/segmentation/page:
    post:
      tags:
      - "Layouterkennung"
      summary: "Detect all regions of a page."
      description: "Detect all regions of a single page. Minimal categories are text, image, table, separator, any."
      operationId: "createRegionsOfPage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK” or ”OCR-D-IMG-DEWARP” or ”OCR-D-IMG-BIN”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID "OCR-D-SEG-PAGE").
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /layout/segmentation/line:
    post:
      tags:
      - "Layouterkennung"
      summary: "Detect all text line regions inside the text regions of a page."
      description: "Detect all text line regions inside the text regions of a single page."
      operationId: "createTextLinesOfPage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK” or ”OCR-D-IMG-DEWARP” or ”OCR-D-IMG-BIN”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-SEG-LINE”).
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /layout/segmentation/classification:
    post:
      tags:
      - "Layouterkennung"
      summary: "Classify all detected regions of a page."
      description: "Classify all detected regions in a more sophisticated way. Minimal categories are paragraph, headline, label, column title, footer, page number, first letter, marginal note, footnote, ...."
      operationId: "classifyRegionsOfPage"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the PAGE XML files are available via fileGrp section (ID= "OCR-D-SEG-PAGE" or ”OCR-D-SEG-BLOCK” or ”OCR-D-SEG-LINE”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID "OCR-D-SEG-PAGE" and/or ”OCR-D-SEG-BLOCK” and/or ”OCR-D-SEG-LINE”).
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /layout/analysis:
    post:
      tags:
      - "Layouterkennung"
      summary: "Analyse regions on document level."
      description: "Analyse regions on document level. Detect main thread and link all text levels of the document."
      operationId: "createDocumentLayout"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the PAGE XML files are available via fileGrp section (ID= "OCR-D-SEG-PAGE" or ”OCR-D-SEG-BLOCK” or ”OCR-D-SEG-LINE”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-LAYOUT”).
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /ocr/analysis:
    post:
      tags:
      - "Textoptimierung"
      summary: "OCR on page level"
      description: "Do OCR based on existing approaches. Combining and/or optimization of different OCR algorithms. ."
      operationId: "createText"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized document. All references of the PAGE XML files are available via fileGrp section (ID= "OCR-D-SEG-PAGE" or ”OCR-D-SEG-BLOCK” or ”OCR-D-SEG-LINE”) inside the METS document. in (see http://www.loc.gov/standards/mets/mets.xsd)
         - in: formData
           name: imageID
           type: array
           items: 
             type: string
           required: true
           description: All IDs of the image files which should be characterized. 
         - in: formData
           name: ocrModel
           type: file 
           description: File holding model for specific font and for a specific OCR algorithm.
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-OCR”).
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /ocr/optimization:
    post:
      tags:
      - "Textoptimierung"
      summary: "Correct text based on lexica."
      description: "Improve texts based on multiple OCR results and/or with specific lexica."
      operationId: "createOptimizedText"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding all information of the digitized page. All references of the images are available via fileGrp section (ID="OCR-D-IMG" or ”OCR-D-IMG-CROP” or ”OCR-D-IMG-DESKEW” or ”OCR-D-IMG-DESPECK” or ”OCR-D-IMG-DEWARP” or ”OCR-D-IMG-BIN”). All page descriptions (available in PAGE XML) are available via fileGrp section (ID=”OCR-D-SEG-LINE”) inside the METS document. (see http://www.primaresearch.org/schema/PAGE/gts/pagecontent/2017-07-15/pagecontent.xsd)
         - in: formData
           name: ocrModel
           type: file 
           description: File holding model for specific font and for a specific OCR algorithm.
      responses:
        201:
          description: Successful Operation. The created file(s) has/have to be referenced inside the fileGrp sections (ID ”OCR-D-OCR” ToDo).
          schema:
            $ref: "#/definitions/metsXML"
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /ocrd/publish:
    post:
      tags:
      - "Langzeitarchivierung"
      summary: "Archive document with all results."
      description: "Store digitalisation and results of a document in an archive and make it referencable."
      operationId: "archiveDocument"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      - "application/json"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding results of all pages. All external files linked with the given document are referenced in the fileGrp section (ID="PAGE" ToDo) inside the METS document. (see http://www.primaresearch.org/schema/PAGE/gts/pagecontent/2017-07-15/pagecontent.xsd)
      responses:
        201:
          description: Successful Operation.
            Returns PID of the archived document.
          schema:
            type: string
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
    put:
      tags:
      - "Langzeitarchivierung"
      summary: "Update archived document with all results."
      description: "Store digitalisation and results of a document in an archive and make it referencable."
      operationId: "updateArchivedDocument"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      - "application/json"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding results of all pages. All external files linked with the given document are referenced in the fileGrp section (ID="PAGE" ToDo) inside the METS document. (see http://www.primaresearch.org/schema/PAGE/gts/pagecontent/2017-07-15/pagecontent.xsd)
         - in: formData
           name: pid
           type: "string" 
           required: true
           description: Persistent identifier referencing the document and its data/metadata.
      responses:
        201:
          description: Successful Operation.
            Returns PID of the archived document.
          schema:
            type: string
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
  /ocrd/analyze:
    post:
      tags:
      - "Qualitätssicherung"
      summary: "Estimate confidence of expectable result and suggest best algorithm."
      description: "Estimate the confidence of the result and suggest best algorithms to use on base of some examples of the document."
      operationId: "estimateConfidenceOnDocument"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/xml"
      - "application/json"
      parameters:
         - in: formData
           name: metsXml
           type: file 
           required: true
           description: XML holding images of all pages. All page descriptions (available in PAGE XML) are available via fileGrp section (ID="OCR-D-IMG") inside the METS document. (see http://www.primaresearch.org/schema/PAGE/gts/pagecontent/2017-07-15/pagecontent.xsd)
      responses:
        201:
          description: Successful Operation.
            Returns estimation about the given document.
          schema:
            $ref: '#/definitions/Estimation'
        400:
          description: "Invalid input"
        500:
          description: "Internal error"
definitions:
  FontEstimation:
    type: "object"
    properties:
      font:
        type: "array"
        description: "Detected fonts."
        items:
            $ref: '#/definitions/FontFamily'
      confidence:
        type: "array"
        items:
            $ref: '#/definitions/Language'

  FontFamily:
    type: "object"
    properties:
      font:
        items:
            $ref: '#/definitions/FontFamily'
        description: "Detected font."
      confidence:
        type: "number"
        format: "float"
        description: "Propability of detected font."
  Language:
    type: "object"
    properties:
      language:
        type: "string"
        description: "Is there a specifi iso-format?"
      confidence:
        type: "number"
        format: "float"
        description: "Propability of detected language."
  Logging:
    type: "object"
    properties:
      id:
        type: "string"
        description: "ID of the generated output."
      serviceName:
        type: "string"
      serviceVersion: 
        type: "string"
      serviceDescription:
        type: "string"
      serviceURL:
        type: "string"
        format: "uri"
      exitCode: 
        type: "integer"
      exitMessage:
        type: "string"
  ImageCharacteristics:
    type: "object"
    properties:
      intrinsic:
        $ref: "#/definitions/Intrinsic"
      extrinsic:
        $ref: "#/definitions/Extrinsic"
    xml:
      name: "imageCharacterization"
  Intrinsic:
    type: "object"
    properties:
      mixFontParagraph:
        type: "boolean"
      mixFontWord:
        type: "boolean"
      mixFontCharacter:
        type: "boolean"
      mixFontSize:
        type: "boolean"
      mixLanguage:
        type: "boolean"
    xml:
      name: "intrinsic"
  Extrinsic:
    type: "object"
    properties:
      tintendurchdruck:
        type: "boolean"
      annotations:
        type: "boolean"
      speckle:
        type: "boolean"
      distortion:
        type: "boolean"
      contrastVariation:
        type: "boolean"
    xml:
      name: "extrinsic"
  pageXML:
    type: "object"
    properties:
      Metadata:
        type: "string"
      page:
        type: "string"
    xml:
      name: "PcGts"
  metsXML:
    type: "object"
    properties:
      metsHeader:
        $ref: '#/definitions/metsHeader'
      descriptiveMetadata:
        $ref: '#/definitions/descriptiveMetadata'
      administrativeMetadata:
        $ref: '#/definitions/administrativeMetadata'
      fileSection:
        $ref: '#/definitions/fileSection'
      structuralMap:
        type: "string"
      structuralLinks:
        type: "string"
      behaviorSection:
        type: "string"
    xml:
      name: "mets"
  metsHeader:
    type: "object"
    properties:
      agent:
        type: "string"
      role:
        type: "string"
      type:
        type: "string"
      name:
        type: "string"
    xml:
      name: "metsHdr"
  descriptiveMetadata:
    type: "object"
    properties:
      ID:
        type: "string"
      mdref:
        type: "string"
      locType:
        type: "string"
      mimeType:
        type: "string"
      mdType:
        type: "string"
      label:
        type: "string"
      reference:
        type: "string"
    xml:
      name: "dmdSec"
  administrativeMetadata:
    type: "object"
    properties:
      ID:
        type: "string"
      techMD:
        type: "string"
      rightsMD:
        type: "string"
      sourceMD:
        type: "string"
      digiprovMD:
        type: "string"
    xml:
      name: "amdSec"
  fileSection:
    type: "object"
    properties:
      ID:
        type: "string"
      fileGrp:
        type: "array"
        items: 
            $ref:  '#/definitions/fileGrp'
    xml:
      name: "fileSec"
  fileGrp:
    type: "object"
    properties:
      ID:
        type: "string"
      file:
        type: "array"
        items: 
            $ref:  '#/definitions/metsFile'
    xml:
      name: "fileGrp"
  metsFile:
    type: "object"
    properties:
      ID:
        type: "string"
      mimeType:
        type: "string"
      size:
        type: "string"
      created:
        type: "string"
      groupId:
        type: "string"
      locType:
        type: "string"
      referenc:
        type: "string"
    xml:
      name: "fileGrp"
  Estimation:
    type: "object"
    properties:
      confidence:
        type: "number"
        format: float
      model:
        type: "string"
      stillToDefine:
        type: "string"
    xml:
      name: "Model"
externalDocs:
  description: "Find out more about OCR-D"
  url: "http://ocr-d.de"